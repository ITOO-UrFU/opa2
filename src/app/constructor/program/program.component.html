<div *ngIf="data?.program" class="header">
    <h1>
        {{ data?.program?.title }}
    </h1>
    <div *ngIf = "data.targets" id="targets">
        <ul class="target_choices">
            <ng-template ngFor let-target [ngForOf]="data.program.targets">
                <li app-target [class.selected]="data.trajectory.target_id == target.id" [target] = "target"></li>
            </ng-template>
        </ul>
        {{data.trajectory.getTargetId()}}
    </div>
    <div *ngIf = "data.competences">
        <ul>
            <ng-template ngFor let-competence [ngForOf]="data.program?.competences">
                <li>{{ competence?.title }} </li> 
            </ng-template>
        </ul>
    </div>
    <div *ngIf = "data.choice_groups">
        <ng-template ngFor let-choice_group [ngForOf]="data.trajectory.choice_groups">
            <div app-choice-group class="ChoiceGroup" [choice_group_id] = "choice_group"></div>
        </ng-template>
    </div>

    <!-- <div *ngIf="data.trajectory.target_id">

        <ng-template ngIf="data.modules">
            <h2> {{ data.program?.targets_by_id[data.trajectory?.target_id].title }}</h2>
            <ng-template ngIf = "data.choice_groups">
                <ng-template ngFor let-choice_group_id [ngForOf]="data?.program.targets_by_id[data.trajectory?.target_id]?.choice_groups">
                    <div app-choice-group class="ChoiceGroup" [choice_group_id] = "choice_group_id"></div>
                </ng-template>
            </ng-template> 
        </ng-template> 
    </div> -->



    <!-- 



           

        </div>
        <div *ngIf="data?.program?.targets">
		<h2> {{ data?.program?.targets_by_id[trajectory.target_id]?.title }}</h2>
		<ul>
		<ng-template ngFor let-choiceGroup [ngForOf]="data?.program?.targets_by_id[trajectory?.target_id]?.choice_groups" >
			<h3>Группа: {{ data?.program?.choice_groups_by_id[choiceGroup]?.title }} ___ из {{ data?.program?.choice_groups_by_id[choiceGroup]?.labor }} з.e</h3>
			<ng-template ngFor let-module [ngForOf]="data?.program?.choice_groups_by_id[choiceGroup]?.get_data?.program_modules">
				<li class="module_title"><span class="is_selected" *ngIf="data?.program?.modules_by_id[module]?.targets_positions_indexed[trajectory.target_id] == 1">[x]</span>
				<span *ngIf="data?.program?.modules_by_id[module]?.targets_positions_indexed[trajectory.target_id] == 2">[ ]</span>
					{{ data?.program?.modules_by_id[module]?.title }} - <span class="labor_display">{{ data?.program?.modules_by_id[module]?.get_labor }} з.е.</span></li>
					<div class="disciplines">
						<ng-template ngFor let-discipline [ngForOf]="data?.program?.modules_by_id[module]?.disciplines" >
							<p> - <em discipline [discipline]="discipline"></em><span class="labor_display">{{discipline.labor}} з.е.</span></p>
						</ng-template>
					</div>
			</ng-template>
		</ng-template>
		</ul>
	</div>
    </div>

    <div *ngIf="steps.disciplines">
        <h2> Дисциплины расчитаны на {{ term }} обучения, {{(presence=='o')? 'очная' : 'заочная'}} форма  с применением {{ (technology_type==='t')? 'традиционных' : 'дистанционных' }} технологий</h2>
      <div>
        <button [style.border] = "(term === '3,5 года') ? '2px solid green' : '1px solid gray'" (click)="funcLength([1,2,3,4,5,6,7], '3,5 года')">3,5 года</button>
        <button [style.border] = "(term === '4 года') ? '2px solid green' : '1px solid gray'" (click)="funcLength([1,2,3,4,5,6,7,8] , '4 года')">4 года</button>
        <button [style.border] = "(term === '5 лет') ? '2px solid green' : '1px solid gray'" (click)="funcLength([1,2,3,4,5,6,7,8,9,10], '5 лет')">5 лет</button>
        |
        <button [style.border] = "(presence === 'o') ? '2px solid green' : '1px solid gray'" (click)="setPresence('o')">Очно</button>
        <button [style.border] = "(presence === 'z') ? '2px solid green' : '1px solid gray'" (click)="setPresence('z')">Заочно</button>
        |
        <button [style.border] = "(technology_type === 't') ? '2px solid green' : '1px solid gray'" (click)="setTechnologyType('t')">Традиционно</button>
        <button [style.border] = "(technology_type === 'd') ? '2px solid green' : '1px solid gray'" (click)="setTechnologyType('d')">Удаленно</button>
      </div>
      <div app-disciplines *ngIf="data?.program?.id" [programId]="data?.program.id"></div>

        <div *ngif="data?.target" class="build">
            <table width="100%" border="1">
                <ng-template ngFor let-choiceGroup [ngForOf]="data?.program.targets_by_id[selected]?.choice_groups">


                    <ng-template ngFor let-module [ngForOf]="data?.program.choice_groups_by_id[choiceGroup].get_data?.program_modules">
                        <ng-template [ngIf]="modules[choiceGroup].default.indexOf(module)!=-1">
                            <ng-template ngFor let-discipline [ngForOf]="data?.program.modules_by_id[module].disciplines">
                                <tr>
                                    <td>
                                        <em discipline [discipline]="discipline" [variants]="data?.program.variants[discipline.id]"></em>
                                    </td>
                                    <ng-template ngFor let-semester [ngForOf]="eduLength">
                                        <td [style.background-color]="discipline.default_semester[term] == semester ? 'rgba(128, 0, 0, 0.21)' : 'rgba(0, 128, 0, 0.21)'">
                                          <ng-template ngFor let-variant [ngForOf]="data?.program.variants[discipline.id]">
                                            <div [style.background-color] = "variantSelected1(discipline, data?.program.variants[discipline.id], variant, semester) ? 'green' : '' ">
                                            <div *ngIf="variantSelected1(discipline, data?.program.variants[discipline.id], variant, semester)">
                                            <ng-template [ngIf]="variant.technology?.presence=='online'">
                                              <button>Онлайн курс: {{variant.course?.title}}</button>
                                            </ng-template>
                                            <ng-template [ngIf]="variant.parity">
                                              <ng-template [ngIf]="variant.parity && semester%2==variant.parity && variant.technology?.presence=='z' && variant.technology.technology_type==='t'">
                                                <button>Тр.Заоч (parity {{ variant.parity }})</button>
                                              </ng-template>
                                              <ng-template [ngIf]="variant.parity && semester%2==variant.parity && variant.technology?.presence=='z' && variant.technology.technology_type==='вd'">
                                                <button>Дист.Заоч (parity {{ variant.parity }})}</button>
                                              </ng-template>
                                              <ng-template [ngIf]="variant.parity && semester%2==variant.parity && variant.technology?.presence=='o' && variant.technology.technology_type==='t'">
                                                <button>Тр.Oч (parity {{ variant.parity }})</button>
                                              </ng-template>
                                              <ng-template [ngIf]="variant.parity && semester%2==variant.parity && variant.technology?.presence=='o' && variant.technology.technology_type==='d'">
                                                <button> Дист.Оч (parity {{ variant.parity }})</button>
                                              </ng-template>
                                            </ng-template>
                                            <ng-template [ngIf]="!variant.parity && discipline.default_semester[term] == semester && variant.technology?.presence=='z' && variant.technology.technology_type==='t'">
                                              <button>Тр.Заоч {{ variant.semester?.term }}</button>
                                            </ng-template>
                                            <ng-template [ngIf]="!variant.parity && discipline.default_semester[term] == semester && variant.technology?.presence=='z' && variant.technology.technology_type==='d'">
                                              <button>Дист.Заоч {{ variant.semester?.term }}</button>
                                            </ng-template>
                                            <ng-template [ngIf]="!variant.parity && discipline.default_semester[term] == semester && variant.technology?.presence=='o' && variant.technology.technology_type==='t'">
                                              <button>Тр.Оч {{ variant.semester?.term }}</button>
                                            </ng-template>
                                            <ng-template [ngIf]="!variant.parity && discipline.default_semester[term] == semester && variant.technology?.presence=='o' && variant.technology.technology_type==='d'">
                                              <button>Дист.Оч {{ variant.semester?.term }}</button>
                                            </ng-template>
                                            </div>
                                          </ng-template>




                                            <ng-template ngFor let-variant [ngForOf]="data?.program.variants[discipline.id]">
                                                <div *ngIf=" variant.semester?.term && discipline.default_semester[term] == semester
                          && (variant.technology.presence == presence || variant.technology.presence == 'online')
                          && variant.technology.technology_type == technology_type
                          && variant.semester.term == term" style="background: gray; color: #FFFFFF">{{ variant.technology.title }}<br /> {{ variant.diagram.title }}</div>
                                                <ng-template [ngIf]="variant.course">
                                                    <div>Онлайн-курс</div>
                                                </ng-template>
                                                <ng-template [ngIf]="variant.parity == 1 || variant.parity == 2 ">
                                                    <div *ngIf="semester%2==variant.parity">
                                                        <div [ngSwitch]="semester%2">
                                                            <div *ngSwitchCase="1">{{ variant.parity }} Осень </div>
                                                            <div *ngSwitchCase="0">{{ variant.parity }} Весна </div>
                                                        </div>
                                                    </div>
                                                </ng-template>
                                                <ng-template [ngIf]="variant.parity == 3 ">
                                                    <div> Когда хошь </div>
                                                </ng-template>
                                                <ng-template [ngIf]="variant.semester">
                                                    <div [ngSwitch]="variant.semester.training_semester - semester">
                                                        <div *ngSwitchCase="0">{{variant.semester.term}} </div>
                                                    </div>
                                                </ng-template>
                                            </ng-template>
                                        </td>
                                    </ng-template>
                                </tr>
                            </ng-template>
                        </ng-template>
                    </ng-template>
                </ng-template>
            </table>

        </div>
    </div> -->
</div>
